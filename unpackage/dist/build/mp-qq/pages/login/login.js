(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"2cf1":function(e,n,t){},"498e":function(e,n,t){"use strict";var s=t("2cf1"),a=t.n(s);a.a},"60c2":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=getApp(),s={data:function(){return{useVPN:t.globalData.settings.useVPN,message:"发生了错误"}},methods:{handleSubmit:function(n){var s=this;this.$refs.loading.open();var a=n.detail.value;console.log(a);var o=a.username,c=a.password,r="",u=new Date,l=u.getFullYear(),i=u.getMonth()+1;r=i>=8?"".concat(l,"-").concat(l+1,"-1"):"".concat(l-1,"-").concat(l,"-2"),console.log("开课学期 ".concat(r));var f={username:o,password:c,vpn_username:"",vpn_password:"",xsfs:"",kksj:r};a.semester&&(f.kksj=a.semester);var d=t.globalData.host;if(this.useVPN){var g=a.vpnusername,p=a.vpnpassword;f.vpn_username=g,f.vpn_password=p,d+="/vpn"}else d+="/just";d+="/course";try{e.request({url:d,data:f,method:"GET",success:function(n){console.log(n),s.$refs.loading.close();var a=n.data;200!==a.code?(console.log(a.message),s.message=a.message,s.$refs.message.open()):(e.setStorage({key:"login_key",data:f}),e.setStorage({key:"course_key",data:a.data}),t.globalData.course=a.data,t.globalData.settings.currentSemester=f.kksj,t.globalData.settings.scoreQuerySemester=f.kksj,e.setStorage({key:"settings_key",data:t.globalData.settings}),console.log("login success"),e.switchTab({url:"../index/index"}))},fail:function(e){s.$refs.loading.close(),s.message="发生了错误",s.$refs.message.open()}})}catch(n){console.log(n),this.$refs.loading.close(),this.message="发生了错误",this.$refs.message.open()}}}};n.default=s}).call(this,t("a821")["default"])},6970:function(e,n,t){"use strict";(function(e){t("c7c7");s(t("66fd"));var n=s(t("7cfd"));function s(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("a821")["createPage"])},"7cfd":function(e,n,t){"use strict";t.r(n);var s=t("a746"),a=t("e8c0");for(var o in a)"default"!==o&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t("498e");var c,r=t("f0c5"),u=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],c);n["default"]=u.exports},a746:function(e,n,t){"use strict";var s={wLoading:function(){return t.e("components/w-loading/w-loading").then(t.bind(null,"15c8"))},uniPopup:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-popup/uni-popup")]).then(t.bind(null,"6b2c"))}},a=function(){var e=this,n=e.$createElement;e._self._c},o=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return s}))},e8c0:function(e,n,t){"use strict";t.r(n);var s=t("60c2"),a=t.n(s);for(var o in s)"default"!==o&&function(e){t.d(n,e,(function(){return s[e]}))}(o);n["default"]=a.a}},[["6970","common/runtime","common/vendor"]]]);